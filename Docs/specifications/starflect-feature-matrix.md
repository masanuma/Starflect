# Starflectアプリ 機能分類マトリクス

## 概要
Starflectアプリの各レベルにおける「分析」と「占い」の明確な役割分担を定義する重要な仕様書です。
この分類により、必要な情報の要素とプロンプト設計が決定されます。

## 機能分類マトリクス

### Level1（お手軽12星座占い）
| 機能分類 | 機能名 | 内容 | 実装方式 | データ保存 |
|---------|--------|------|----------|------------|
| **分析** | 12星座から見たあなた | ユーザーの基本的な性格・特徴 | **定型の文章** | なし（固定テンプレート） |
| **占い** | 占い～12星座から見たあなた | 今日/明日/今週の期間的な運勢 | **占い機能（AI生成）** | 継続性のため一時保存 |

### Level2（3天体本格占い）
| 機能分類 | 機能名 | 内容 | 実装方式 | データ保存 |
|---------|--------|------|----------|------------|
| **分析** | あなたの隠れた一面を発見 | 3天体から見た深層的な性格分析 | **AIで分析** | **ローカルDBに保存** |
| **占い** | 占い～あなたの隠れた一面 | 今日/明日/今週の期間的な運勢 | **占い機能（AI生成）** | 継続性のため一時保存 |

### Level3（10天体印象診断）
| 機能分類 | 機能名 | 内容 | 実装方式 | データ保存 |
|---------|--------|------|----------|------------|
| **分析** | まわりから見たあなた | 10天体から見た印象・行動パターン | **AIで分析** | **ローカルDBに保存** |
| **占い** | 占い～まわりから見たあなた | 今日/明日/今週の期間的な運勢 | **占い機能（AI生成）** | 継続性のため一時保存 |

## 重要な設計原則

### 分析機能の特徴
- **固定的な性格・特徴**：生年月日・出生時刻・出生地から導かれる変わらない要素
- **ローカルDB保存**：Level2・Level3は一度分析したら保存（変わらない特徴のため）
- **キャッシュ機能**：同一ユーザーは再計算不要

### 占い機能の特徴
- **期間的な運勢**：今日、明日、今週、来週、1ヶ月、3ヶ月、6ヶ月、1年
- **予測・注意・アクション**：
  - 何が起こりそうか
  - 何に気をつけるべきか
  - 具体的なアクション・アドバイス
- **継続性のある占い**：前回の占い結果を参考にした一貫性のある内容

## プロンプト設計への影響

### 分析用プロンプト
- ユーザーの**生まれ持った性格・特徴**に焦点
- **変わらない要素**の分析
- 天体配置の**固定的な影響**を解説

### 占い用プロンプト  
- **期間限定の運勢**に焦点
- **具体的な出来事の予測**
- **行動指針・注意点**の提供
- **トランジット占星術**的アプローチ

## 実装における注意点

### データの分離
- **分析結果**：ローカルDBで永続保存
- **占い結果**：一時保存（継続性のため）

### ユーザー体験
- **分析**：「あなた自身について知る」体験
- **占い**：「今後の運勢を知る」体験

### 技術的考慮
- **分析**：計算コスト高（一度だけ実行）
- **占い**：軽量で頻繁に実行

---

**重要**: この機能分類マトリクスは、Starflectアプリの根幹をなす仕様です。
すべての開発・修正において、この分類に従って実装する必要があります。 