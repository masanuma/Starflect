<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Basic Meta Tags -->
    <meta name="description" content="ã€ç„¡æ–™æ˜Ÿå ã„ã€‘ç”Ÿå¹´æœˆæ—¥ãƒ»å‡ºç”Ÿæ™‚åˆ»ã‹ã‚‰å ã†æœ¬æ ¼å æ˜Ÿè¡“ã€‚AIæ­è¼‰ã§12æ˜Ÿåº§ã‹ã‚‰æ•°ç™¾ä¸‡åˆ†ã®1ã®ã‚ãªãŸã ã‘ã®å ã„çµæœã€‚å¤ªé™½ãƒ»æœˆãƒ»ä¸Šæ˜‡æ˜Ÿåº§ã®è©³ç´°åˆ†æã§æ‹æ„›ãƒ»ä»•äº‹ãƒ»æ€§æ ¼ã‚’å®Œå…¨è§£æ˜" />
    <meta name="keywords" content="æ˜Ÿå ã„,å ã„,å¤©ä½“å ã„,å æ˜Ÿè¡“,12æ˜Ÿåº§,ãƒ›ãƒ­ã‚¹ã‚³ãƒ¼ãƒ—,æ˜Ÿåº§å ã„,é‹å‹¢,æ€§æ ¼è¨ºæ–­,æ‹æ„›å ã„,ç›¸æ€§å ã„,å¤ªé™½æ˜Ÿåº§,æœˆæ˜Ÿåº§,ä¸Šæ˜‡æ˜Ÿåº§,AIå ã„,ç„¡æ–™å ã„,æœ¬æ ¼å ã„,å¤©ä½“,æƒ‘æ˜Ÿ,æ˜Ÿåº§,ç‰¡ç¾Šåº§,ç‰¡ç‰›åº§,åŒå­åº§,èŸ¹åº§,ç…å­åº§,ä¹™å¥³åº§,å¤©ç§¤åº§,è åº§,å°„æ‰‹åº§,å±±ç¾Šåº§,æ°´ç“¶åº§,é­šåº§" />
    <title>ã€ç„¡æ–™ã€‘æ˜Ÿå ã„ãƒ»å¤©ä½“å ã„ Starflectï½œ12æ˜Ÿåº§ã‹ã‚‰æ•°ç™¾ä¸‡åˆ†ã®1ã®ã‚ãªãŸã ã‘ã®å ã„</title>
    
    <!-- PWA Theme Colors -->
    <meta name="theme-color" content="#667eea" />
    <meta name="msapplication-TileColor" content="#667eea" />
    <meta name="background-color" content="#1a1a2e" />
    
    <!-- Modern PWA Support -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Starflect" />
    <meta name="application-name" content="Starflect" />
    
    <!-- PWA Display Mode (ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨) -->
    <meta name="display-mode" content="standalone" />
    
    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="/icons/icon.svg" />
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/icons/icon-512x512.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-192x192.png" />
    <link rel="shortcut icon" href="/icons/icon-192x192.png" />
    
    <!-- Apple Touch Icons -->
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-192x192.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/icon-192x192.png" />
    
    <!-- Windows Tiles -->
    <meta name="msapplication-TileImage" content="/icons/icon-192x192.png" />
    <meta name="msapplication-TileColor" content="#667eea" />
    
    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="ã€ç„¡æ–™ã€‘æ˜Ÿå ã„ãƒ»å¤©ä½“å ã„ Starflectï½œ12æ˜Ÿåº§ã‹ã‚‰æ•°ç™¾ä¸‡åˆ†ã®1ã®ã‚ãªãŸã ã‘ã®å ã„" />
    <meta property="og:description" content="ã€ç„¡æ–™æ˜Ÿå ã„ã€‘ç”Ÿå¹´æœˆæ—¥ãƒ»å‡ºç”Ÿæ™‚åˆ»ã‹ã‚‰å ã†æœ¬æ ¼å æ˜Ÿè¡“ã€‚AIæ­è¼‰ã§12æ˜Ÿåº§ã‹ã‚‰æ•°ç™¾ä¸‡åˆ†ã®1ã®ã‚ãªãŸã ã‘ã®å ã„çµæœã€‚å¤ªé™½ãƒ»æœˆãƒ»ä¸Šæ˜‡æ˜Ÿåº§ã®è©³ç´°åˆ†æã§æ‹æ„›ãƒ»ä»•äº‹ãƒ»æ€§æ ¼ã‚’å®Œå…¨è§£æ˜" />
    <meta property="og:image" content="/icons/icon-512x512.png" />
    <meta property="og:url" content="https://starflect.asanuma.works" />
    <meta property="og:site_name" content="Starflect" />
    <meta property="og:locale" content="ja_JP" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="ã€ç„¡æ–™ã€‘æ˜Ÿå ã„ãƒ»å¤©ä½“å ã„ Starflectï½œ12æ˜Ÿåº§ã‹ã‚‰æ•°ç™¾ä¸‡åˆ†ã®1ã®ã‚ãªãŸã ã‘ã®å ã„" />
    <meta name="twitter:description" content="ã€ç„¡æ–™æ˜Ÿå ã„ã€‘ç”Ÿå¹´æœˆæ—¥ãƒ»å‡ºç”Ÿæ™‚åˆ»ã‹ã‚‰å ã†æœ¬æ ¼å æ˜Ÿè¡“ã€‚AIæ­è¼‰ã§12æ˜Ÿåº§ã‹ã‚‰æ•°ç™¾ä¸‡åˆ†ã®1ã®ã‚ãªãŸã ã‘ã®å ã„çµæœã€‚å¤ªé™½ãƒ»æœˆãƒ»ä¸Šæ˜‡æ˜Ÿåº§ã®è©³ç´°åˆ†æã§æ‹æ„›ãƒ»ä»•äº‹ãƒ»æ€§æ ¼ã‚’å®Œå…¨è§£æ˜" />
    <meta name="twitter:image" content="/icons/icon-512x512.png" />
    <meta name="twitter:site" content="@starflect_app" />
    <meta name="twitter:creator" content="@starflect_app" />
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3940256099942544"
         crossorigin="anonymous"></script>
    
    <!-- è¿½åŠ SEOãƒ¡ã‚¿ã‚¿ã‚° -->
    <meta name="robots" content="index, follow" />
    <meta name="googlebot" content="index, follow" />
    <meta name="author" content="Starflect" />
    <meta name="language" content="Japanese" />
    <meta name="geo.region" content="JP" />
    <meta name="geo.country" content="Japan" />
    <link rel="canonical" href="https://starflect.asanuma.works/" />
    
    <!-- æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Starflect",
      "alternateName": "ã‚¹ã‚¿ãƒ¼ãƒ•ãƒ¬ã‚¯ãƒˆ",
      "description": "ç„¡æ–™ã®æœ¬æ ¼å æ˜Ÿè¡“ã‚¢ãƒ—ãƒªã€‚ç”Ÿå¹´æœˆæ—¥ãƒ»å‡ºç”Ÿæ™‚åˆ»ã‹ã‚‰12æ˜Ÿåº§ã€å¤ªé™½ãƒ»æœˆãƒ»ä¸Šæ˜‡æ˜Ÿåº§ã®è©³ç´°åˆ†æã§æ‹æ„›ãƒ»ä»•äº‹ãƒ»æ€§æ ¼ã‚’å ã„ã¾ã™",
      "url": "https://starflect.asanuma.works",
      "applicationCategory": "EntertainmentApplication",
      "operatingSystem": "Web",
      "keywords": ["æ˜Ÿå ã„", "å ã„", "å¤©ä½“å ã„", "å æ˜Ÿè¡“", "12æ˜Ÿåº§", "ãƒ›ãƒ­ã‚¹ã‚³ãƒ¼ãƒ—", "ç„¡æ–™å ã„", "æ‹æ„›å ã„", "ç›¸æ€§å ã„", "æ€§æ ¼è¨ºæ–­", "å¤ªé™½æ˜Ÿåº§", "æœˆæ˜Ÿåº§", "ä¸Šæ˜‡æ˜Ÿåº§", "AIå ã„"],
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "JPY",
        "availability": "https://schema.org/InStock"
      },
      "inLanguage": "ja",
      "author": {
        "@type": "Organization",
        "name": "Starflect",
        "url": "https://starflect.asanuma.works"
      },
      "dateCreated": "2024-01-01",
      "dateModified": "2025-01-23",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "1523",
        "bestRating": "5",
        "worstRating": "1"
      },
      "featureList": [
        "12æ˜Ÿåº§å ã„",
        "å¤ªé™½æ˜Ÿåº§åˆ†æ",
        "æœˆæ˜Ÿåº§åˆ†æ", 
        "ä¸Šæ˜‡æ˜Ÿåº§åˆ†æ",
        "10å¤©ä½“å ã„",
        "AIå ã„å¸«ãƒãƒ£ãƒƒãƒˆ",
        "æ‹æ„›å ã„",
        "ç›¸æ€§å ã„",
        "æ€§æ ¼è¨ºæ–­",
        "ç‰¡ç¾Šåº§å ã„",
        "ç‰¡ç‰›åº§å ã„",
        "åŒå­åº§å ã„",
        "èŸ¹åº§å ã„",
        "ç…å­åº§å ã„",
        "ä¹™å¥³åº§å ã„",
        "å¤©ç§¤åº§å ã„",
        "è åº§å ã„",
        "å°„æ‰‹åº§å ã„",
        "å±±ç¾Šåº§å ã„",
        "æ°´ç“¶åº§å ã„",
        "é­šåº§å ã„"
      ],
      "audience": {
        "@type": "Audience",
        "audienceType": "å ã„å¥½ãã€æ˜Ÿåº§ã«èˆˆå‘³ãŒã‚ã‚‹äººã€è‡ªå·±åˆ†æã‚’ã—ãŸã„äºº"
      },
      "potentialAction": {
        "@type": "UseAction",
        "target": "https://starflect.asanuma.works/"
      }
    }
    </script>
    
    <!-- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã®ãŸã‚ã«ãƒãƒ¼ãƒˆ3000ã¸ã®é€šä¿¡ã‚’è¨±å¯ -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' https: data: http://localhost:3000 http://127.0.0.1:3000; script-src 'self' 'unsafe-inline' 'unsafe-eval' https: data: https://maps.googleapis.com https://maps.gstatic.com; style-src 'self' 'unsafe-inline' https: data:; img-src 'self' data: https: blob:; connect-src 'self' https: wss: http://localhost:3000 http://127.0.0.1:3000 https://maps.googleapis.com https://maps.gstatic.com; font-src 'self' data: https:; manifest-src 'self'; frame-src 'self' https: data:; child-src 'self' https: data:;" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <script>
      // æ—¢å­˜ã®Service Workerã‚’å¼·åˆ¶è§£é™¤
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(registrations => {
          for(let registration of registrations) {
            registration.unregister();
            console.log('ğŸ—‘ï¸ æ—§Service Workerã‚’è§£é™¤ã—ã¾ã—ãŸ');
          }
        });
      }

      // PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
      let deferredPrompt;
      
      // PWAåˆæœŸåŒ–
      window.starflectPWA = {
        canInstall: false,
        install: null
      };
      
      window.addEventListener('beforeinstallprompt', (e) => {
        try {
          console.log('ğŸ“± PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæº–å‚™å®Œäº†');
          e.preventDefault();
          deferredPrompt = e;
          
          // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
          showInstallButton();
        } catch (error) {
          console.error('âŒ PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ©ãƒ¼:', error);
        }
      });
      
      window.addEventListener('appinstalled', () => {
        try {
          console.log('ğŸ‰ PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†');
          deferredPrompt = null;
          hideInstallButton();
        } catch (error) {
          console.error('âŒ PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã‚¨ãƒ©ãƒ¼:', error);
        }
      });
      
      // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã®è¡¨ç¤º/éè¡¨ç¤º
      function showInstallButton() {
        try {
          // Reactå´ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹å‡¦ç†
          window.starflectPWA = {
            canInstall: true,
            install: () => {
              if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                  if (choiceResult.outcome === 'accepted') {
                    console.log('âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒPWAã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’å—ã‘å…¥ã‚Œã¾ã—ãŸ');
                  } else {
                    console.log('âŒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒPWAã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’æ‹’å¦ã—ã¾ã—ãŸ');
                  }
                  deferredPrompt = null;
                }).catch((error) => {
                  console.error('âŒ PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼:', error);
                });
              }
            }
          };
        } catch (error) {
          console.error('âŒ PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³è¡¨ç¤ºã‚¨ãƒ©ãƒ¼:', error);
        }
      }
      
      function hideInstallButton() {
        try {
          if (window.starflectPWA) {
            window.starflectPWA.canInstall = false;
          }
        } catch (error) {
          console.error('âŒ PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³éè¡¨ç¤ºã‚¨ãƒ©ãƒ¼:', error);
        }
      }
      
      // ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã®æ¨©é™è¦æ±‚
      async function requestNotificationPermission() {
        if ('Notification' in window && 'serviceWorker' in navigator) {
          try {
            const permission = await Notification.requestPermission();
            console.log('ğŸ”” é€šçŸ¥æ¨©é™:', permission);
            
            if (permission === 'granted') {
              console.log('âœ… é€šçŸ¥æ¨©é™ãŒä»˜ä¸ã•ã‚Œã¾ã—ãŸ');
            }
          } catch (error) {
            console.error('âŒ é€šçŸ¥æ¨©é™ã‚¨ãƒ©ãƒ¼:', error);
          }
        } else {
          console.log('ğŸ“± ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯é€šçŸ¥ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“');
        }
      }

      // é€šçŸ¥æ¨©é™è¦æ±‚ã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å…¬é–‹
      window.starflectNotification = { requestPermission: requestNotificationPermission };
    </script>
  </body>
</html>
