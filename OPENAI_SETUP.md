# 🤖 Starflect AI機能 - OpenAI API設定ガイド

## 概要

StarflectアプリにOpenAI GPT-4o-miniを使用したAI機能が追加されました！

### 🌟 新機能
- **AI詳細分析**: 天体配置から深い洞察を提供
- **未来予測**: 1ヶ月〜1年の運勢予測
- **AI占い師チャット**: リアルタイムで質問に回答

## 🔧 OpenAI APIキーの設定方法

### 1. OpenAI APIキーの取得

1. [OpenAI Platform](https://platform.openai.com/)にアクセス
2. アカウントを作成またはログイン
3. 右上の「API keys」をクリック
4. 「Create new secret key」をクリック
5. APIキーをコピー（必ず安全な場所に保存してください）

### 2. 環境変数の設定

#### 開発環境の場合

プロジェクトのルートディレクトリに`.env`ファイルを作成：

```bash
# .env ファイル
VITE_OPENAI_API_KEY=your_openai_api_key_here
```

**重要**: `.env`ファイルは`.gitignore`に含まれているため、GitHubにはアップロードされません。

#### 本番環境（Vercel等）の場合

デプロイ先の環境変数設定で以下を追加：
- **Variable Name**: `VITE_OPENAI_API_KEY`
- **Value**: あなたのOpenAI APIキー

### 3. 動作確認

1. 開発サーバーを再起動
```bash
npm run dev
```

2. 占い結果画面で「🤖 AI分析を実行」ボタンをクリック
3. コンソールに「🤖 OpenAI GPT-4o-miniを使用してAI分析を実行中...」と表示されれば成功

## 💰 料金について

OpenAI GPT-4o-miniは非常にコストパフォーマンスが良いモデルです：

- **入力**: $0.15 / 1M tokens
- **出力**: $0.60 / 1M tokens

一般的な占い分析（約2000-3000トークン）あたりの概算コスト：
- 1回の分析: 約$0.001-0.002（約0.1-0.2円）
- 100回の分析でも約10-20円程度

## 🛡️ セキュリティ注意事項

1. **APIキーの管理**
   - APIキーは絶対に公開しないでください
   - GitHubやその他の公開場所にコミットしないでください
   - 定期的にAPIキーを更新することを推奨します

2. **使用量の監視**
   - OpenAI Platform > Usage で使用量を確認できます
   - 必要に応じて使用制限を設定してください

## 🔄 フォールバック機能

APIキーが設定されていない場合や、API呼び出しに失敗した場合は、自動的にシミュレーションモードに切り替わります。基本的な占い機能は引き続き利用できます。

## 🆘 トラブルシューティング

### APIキーエラーが発生する場合

1. APIキーが正しく設定されているか確認
2. OpenAIアカウントに十分なクレジットがあるか確認
3. ブラウザの開発者ツール（F12）でコンソールエラーを確認

### よくあるエラー

- `401 Unauthorized`: APIキーが無効または未設定
- `429 Too Many Requests`: レート制限に達している
- `insufficient_quota`: クレジット不足

## 📞 サポート

問題が発生した場合は、以下の情報と共にお問い合わせください：
- エラーメッセージ
- ブラウザのコンソールログ
- 使用環境（ブラウザ、OS等）

---

✨ **StarflectのAI機能で、より深い占星術の洞察をお楽しみください！** 